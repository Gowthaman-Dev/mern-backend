<script>
    /***********************
 TASK 1.1
 Even numbers using for loop
***********************/
function getEvenNumbers(arr) {
  let result = [];

  for (let i = 0; i < arr.length; i++) {
    if (arr[i] % 2 === 0) {
      result.push(arr[i]);
    }
  }

  return result;
}

console.log(getEvenNumbers([1, 2, 3, 4, 5, 6]));


/***********************
 TASK 1.2
 Day of week using switch
***********************/
function getDay(day) {
  switch (day) {
    case 1: return "Monday";
    case 2: return "Tuesday";
    case 3: return "Wednesday";
    case 4: return "Thursday";
    case 5: return "Friday";
    case 6: return "Saturday";
    case 7: return "Sunday";
    default: return "Invalid day";
  }
}

console.log(getDay(3));
console.log(getDay(9));


/***********************
 TASK 1.3
 Student grade count
***********************/
function countGrades(students) {
  let grades = { A: 0, B: 0, C: 0 };

  for (let student of students) {
    if (student.marks >= 90) {
      grades.A++;
    } else if (student.marks >= 75) {
      grades.B++;
    } else {
      grades.C++;
    }
  }

  return grades;
}

console.log(
  countGrades([
    { name: "Ajay", marks: 92 },
    { name: "Ravi", marks: 80 },
    { name: "Kumar", marks: 60 },
  ])
);


/***********************
 TASK 2.1
 Truthy / Falsy check
***********************/
function checkTruthy(value) {
  return value ? "truthy" : "falsy";
}

console.log(checkTruthy(0));
console.log(checkTruthy(""));
console.log(checkTruthy(null));
console.log(checkTruthy(undefined));
console.log(checkTruthy([]));
console.log(checkTruthy({}));
console.log(checkTruthy(false));
console.log(checkTruthy("hello"));


/***********************
 TASK 2.2
 Filter truthy values
***********************/
function getTruthyValues(arr) {
  let result = [];

  for (let value of arr) {
    if (value) {
      result.push(value);
    }
  }

  return result;
}

console.log(getTruthyValues([0, "", null, 1, "hi", true, false]));


/***********************
 TASK 2.3
 Name fallback logic
***********************/
function getName(firstName, lastName, nickname) {
  if (firstName && lastName) {
    return firstName + " " + lastName;
  }
  if (firstName) {
    return firstName;
  }
  if (nickname) {
    return nickname;
  }
  return "Anonymous";
}

console.log(getName("Ajay", "", "AJ"));
console.log(getName("", "", "Hero"));
console.log(getName("", "", ""));


/***********************
 TASK 3.2
 var loop problem + fixes
***********************/

// ❌ Problem
function varProblem() {
  for (var i = 1; i <= 3; i++) {
    setTimeout(() => console.log(i), 1000);
  }
}
varProblem();

// ✅ Fix using let
function letFix() {
  for (let i = 1; i <= 3; i++) {
    setTimeout(() => console.log(i), 1000);
  }
}
letFix();

// ✅ Fix using closure
function closureFix() {
  for (var i = 1; i <= 3; i++) {
    (function (x) {
      setTimeout(() => console.log(x), 1000);
    })(i);
  }
}
closureFix();


/***********************
 TASK 3.3
 var / let / const behavior
***********************/
function variableTest() {
  var a = 10;
  let b = 20;
  const c = 30;

  a = 100;     // ✅ allowed
  b = 200;     // ✅ allowed
  // c = 300;  // ❌ error

  const obj = { name: "Ajay" };
  obj.name = "Ravi"; // ✅ allowed

  console.log(a, b, obj);
}
variableTest();


/***********************
 TASK 4.1
 createMultiplier (closure)
***********************/
function createMultiplier(x) {
  return function (y) {
    return x * y;
  };
}

const double = createMultiplier(2);
console.log(double(5));

const triple = createMultiplier(3);
console.log(triple(4));


/***********************
 TASK 4.2
 secretPassword (private variable)
***********************/
function secretPassword() {
  let password = "";

  return {
    setPassword(newPass) {
      password = newPass;
    },
    checkPassword(guess) {
      return guess === password;
    }
  };
}

const secure = secretPassword();
secure.setPassword("1234");
console.log(secure.checkPassword("1234"));
console.log(secure.checkPassword("0000"));


/***********************
 TASK 4.3
 once function (closure)
***********************/
function once(fn) {
  let called = false;
  let result;

  return function () {
    if (!called) {
      result = fn();
      called = true;
    }
    return result;
  };
}

const init = once(() => {
  console.log("Function executed");
  return 42;
});

console.log(init());
console.log(init());

</script>